function getCurrentTime(){var e,s=new Date,r=s.getHours(),o=s.getMinutes();return r>=13?(r-=12,e=r+":"+o+"PM"):e=12===r?r+":"+o+"PM":0===r?"1:"+o+"AM":r+":"+o+"AM",e}var express=require("express"),app=express(),bodyParser=require("body-parser"),server=require("http").Server(app),io=require("socket.io")(server),urlencodedParser=bodyParser.urlencoded({extended:!1});app.use(express["static"](__dirname+"/public")),app.all("/",function(e,s){s.status(404).send("Page not found.")});var visitors=[];app.post("/process_post",urlencodedParser,function(e,s){console.log("post receieved"),response={firstName:e.body.first,lastName:e.body.last,appointment:e.body.appointment_time},response.checkin=getCurrentTime(),console.log(response),visitors.push(response),io.emit("send list",visitors)}),io.on("connection",function(e){console.log("a user connected"),io.emit("send list",visitors)}),io.on("updated list",function(e){io.emit("send list",visitors)}),server.listen(3e3);